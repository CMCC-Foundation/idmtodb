USE idmdb;

DROP VIEW IF EXISTS `tmp_user_group`;
CREATE VIEW `tmp_user_group` AS (select `user_group_idm`.`iduser_group_idm` AS `iduser_group_idm`,`user_idm`.`iduser_idm` AS `iduser_idm`,`user_idm`.`username` AS `username`,`user_idm`.`name` AS `name`,`user_idm`.`surname` AS `surname`,`user_idm`.`uid` AS `uid`,`user_idm`.`gid` AS `gid`,`user_idm`.`creation_date` AS `creation_date`,`user_idm`.`expiration_date` AS `expiration_date`,`user_idm`.`vpn_expiration_date` AS `vpn_expiration_date`,`user_idm`.`psw_expiration_date` AS `psw_expiration_date`,`user_idm`.`email` AS `email`,`user_idm`.`notes` AS `notes`,`user_idm`.`closing_date` AS `closing_date`,`user_idm`.`nsaccount_lock` AS `nsaccount_lock`,`group`.`name` AS `real_group_name`,`user_group_idm`.`type` AS `type` from ((`user_idm` join `user_group_idm` on(`user_idm`.`iduser_idm` = `user_group_idm`.`iduserExt`)) join `group` on(`user_group_idm`.`idgroupExt` = `group`.`idgroup`)) where `user_group_idm`.`dateTo` is null);
